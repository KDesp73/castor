---
marp: true
theme: uncover 
paginate: true
---

# Castor: Μια raycasting game engine (+ Eidolon)

**Δεσποινίδης Κωνσταντίνος**  

despoinidisk@gmail.com
[github.com/KDesp73](https://github.com/KDesp73)

---

## Eidolon

* Retro look and feel
* Puzzle-Θρίλερ
* Pseudo-3D First Person
* Παρόμοια παιχνίδια:
  * Wolfenstein 3D
  * Doom

---

## Κονσεπτ

- Παγιδευμένος σε μεσαιωνικό αλλα μάλλον ψηφιακό κόσμο
- Glitches ως στοιχεία gameplay & ατμόσφαιρας
- Στόχος: εύρεση κλειδιού για πρόοδο
- Αντιμετώπιση τεράτων με περιορισμένη υγεία

---

### Αληλεπιδραση

* Items
  * **Κλειδί**: χρειάζεται για την πρόοδο του παιχνιδιού
  * **Σπαθί**: ο μόνος τρόπος επίθεσης προς τους εχθρούς
  * **Γυαλιά**: ενεργοποιούν το glitch

* Εχθροί
  * Κάθε εχθρός έχει διαφορετική ταχύτητα, υγεία και δύναμη
  * Προσφέρει ποικιλία στην μάχη

---

## Castor

* Raycasting engine γραμμένη σε C (C99)
* Χρησιμοποιεί την SDL2 για το rendering αλλα και την διαχείριση των ήχων
* Δεν παρέχει GUI για την ανάπτυξη του παιχνιδιού
* Συμβατή μόνο με Linux (προς το παρόν)

---

H engine ειναι οργανωμένη σε modules:

* `assets`
  * **textures**: εικόνες που προορίζονται για τοίχους
  * **sprites**: εικόνες για items ή entities
  * **images**: εικόνες που γίνονται render πάνω στην οθόνη
  * **audio**: οποιοσδήποτε ήχος (ambient ή εφέ)
  * **animations**: κινούμενες εικόνες (περιέχουν περισσότερα απο 1 frames)

---

- `player`
  * Ορίζει την θέση και τον προσανατολισμό της κάμερας
  * Περιέχει μεθόδους για την διαχείριση της κίνηση του παίκτη

* `raycaster`, Μέθοδοι για το rendering των:
  * τοίχων
  * sprites (items/entities)
  * ταβάνι/πάτωμα

---

- `world`
  * Διαχείριση των entities και των items
  * Εισαγωγή των levels απο `*.lvl` αρχεία
  * Pathfinding αλγόριθμοι (A* κλπ)
  * Διαχείριση των events (ορισμός, έλεγχος, εκτέλεση, καθαρισμός)

* `ui`
  * Παρέχει ui components (buttons, sliders, labels)
  * Διαχειρίζεται την ανανέωση του ui και την εμφάνιση του κατα την διάρκεια του παιχνιδιού
  
---

### Παράδειγμα αρχείου `*.lvl`

```
16 16
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 
6 0 0 0 7 0 0 0 0 0 7 0 7 0 7 2 
2 7 7 0 7 7 7 0 7 7 7 0 7 0 7 2 
2 0 0 0 0 0 0 0 0 0 7 0 0 0 0 2 
2 7 7 0 7 0 7 7 7 0 7 0 7 7 7 2 
2 0 0 0 7 0 0 0 0 0 0 0 7 0 0 2 
2 7 7 0 7 7 7 0 7 0 7 0 0 0 7 2 
2 0 0 0 0 0 0 0 7 0 0 0 7 0 0 2 
2 7 7 0 7 0 7 7 7 0 7 0 7 0 7 2 
2 0 0 0 7 0 0 0 0 0 7 0 0 0 7 2 
2 0 7 7 7 0 7 0 7 7 7 7 7 0 7 2 
2 0 0 0 0 0 7 0 0 0 0 0 7 0 0 2 
2 0 7 7 7 0 7 0 7 7 7 7 7 7 0 2 
2 0 7 0 0 0 7 0 7 0 7 0 0 0 0 2 
2 0 7 0 7 0 0 0 0 0 7 0 7 7 0 2 
2 2 2 2 2 2 2 2 2 2 2 9 2 2 2 2 
```

---

### v0.1.0
<img src="./v0.1.0.png" height=500
      alt="v0.1.0">

---

### v0.2.0
<img src="./v0.2.0.png" height=500
      alt="v0.2.0">

---

### v0.4.2
<img src="./v0.4.2.png" height=500
      alt="v0.4.2">

---

### v0.4.3
<img src="./v0.4.3.png" height=500
      alt="v0.4.3">

---

### v0.4.4
<img src="./v0.4.4.png" height=500
      alt="v0.4.4">

---

### v0.5.1
<img src="./v0.5.1.png" height=500
      alt="v0.5.1">

---

### v0.6.0
<img src="./v0.6.0.png" height=500
      alt="v0.6.0">

---

### v1.1.0
<img src="./v1.1.0.png" height=500
      alt="v1.1.0">

---

## Raycasting

* Τεχνική προβολής για "ψευδο-3D" γραφικά σε 2D περιβάλλον.
* Κάθετη σάρωση (casting) ακτίνων από τη θέση του παίκτη προς το περιβάλλον.
* Υπολογίζει την απόσταση μέχρι το πρώτο εμπόδιο (π.χ. τοίχο).
* Η απόσταση μεταφράζεται σε ύψος στήλης στην οθόνη: όσο πιο κοντά, τόσο ψηλότερη.
* Επιτρέπει απόδοση προοπτικής χωρίς πλήρη 3D υπολογισμούς.

---

<img src="raycasting.gif" height=400
      alt="raycasting">

By Lucas Vieira - Own work, Public Domain, https://commons.wikimedia.org/w/index.php?curid=20389654

---

## Εργαλεία

- **C99**
- **SDL2**, βιβλιοθήκη γραφικών
- **lvl**, custom level builder
- **Raylib**, βιβλιοθήκη γραφικών που προσφέρει περισσότερα abstractions
- **changelogger**, CLI tool για την δημιουργία CHANGELOG
- **git**

---

### lvl GUI
<img src="./builder-textures.png" height=500
      alt="builder">

---

## Ευχαριστώ!

Ερωτήσεις;

**GitHub:** [https://github.com/KDesp73/castor](https://github.com/KDesp73/castor)  
